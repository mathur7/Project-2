<br></br>
<div class="row">
<div class="col-sm-6 col-md-7" id="google"><br></br></br>
    </br><%= image_tag "http://maps.google.com/maps/api/staticmap?size=450x300&sensor=false&markers=#{@popup.address}&zoom=16", id: "popupMap" %><br></br>
    <div class="mapinfo">
      <button id="zoomOut"> - </button><button id="zoomIn"> + </button><br></br>
      <p><%= @popup.address %></p><br>
      <button class="btn btn-info"><%= link_to("Get Directions", "https://maps.google.com/maps?daddr=#{@popup.address}")%></button>  
    </div> 
  </div>

<div class="popupinfo">

<h1><strong><%= @popup.name %></strong></h1>
<%= image_tag @popup.image(:medium) %><br>
<% if current_user && current_user.id == @popup.user_id %>
  <%= form_for @popup, :html => { :multipart => true } do |f| %>
      <div><%= f.file_field :image %> </br> 
        <%= f.submit "Upload image", :class => "btn-default" %>
      </div>
  <% end %>





<% if current_user %>
  <%= form_for ([@popup, @feed_new]) do |f| %>
    <br><%= f.text_area :comment, placeholder: "Add your comment" %><br>
    <%= f.submit "Create comment", :class => 'btn btn-info' %><br></br>
  <% end %>
<% else %>
<%= link_to "Sign in to post a comment", new_user_session_path, :class => 'navbar-link'  %>
<% end %>

<h4>Comments</h4>
<div class="jumbotron" id="jumbo">
<% @feeds.each do |feed|%>
<h7><%= feed.comment %></h7><%= link_to "Delete", [@popup, feed], method: :delete, data: {confirm: "Are You Sure?"}, :class => 'btn btn-danger btn-sm' %></br>
<h7>Posted <%= time_ago_in_words(feed.created_at) %> ago by: </h7><br>
<h7><strong><%= @user.email %></strong></h7><br>
<% end %></br> 
 </div>
<% end %></br>
</div>
</div>
<%= link_to 'Back', root_path %></br>
 
<!-- static google map --> 
<script>
  $("#google").on("click", "#zoomIn, #zoomOut", function(event){
    var $img = $("#popupMap");
    var src = $("#popupMap").attr("src");

    var src_arr = src.split("&zoom=")
    var zoom = (Number(src_arr[1]));

    console.log(event.target.id)
    if (event.target.id === "zoomIn"){
      if (zoom < 20){ 
        zoom += 1;
        
      }
    } else {
      if (zoom > 0){ 
        zoom -= 1;
      }
    }
    src = src_arr[0] + "&zoom="+ zoom;
    $img.attr("src",src);
  });
</script>